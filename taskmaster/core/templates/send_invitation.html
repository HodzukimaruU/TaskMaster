{% extends 'base.html' %}

{% block content %}
<h2>Send an invitation to the project: {{ project.title }}</h2>

{% if self_invitation_error %}
    <div class="alert alert-danger">
        You cannot send an invitation to yourself.
    </div>
{% endif %}

{% if success_message %}
    <div class="alert alert-success">
        <p>{{ success_message }}</p>
    </div>
{% endif %}

<form method="get" action=".">
    <input type="text" name="search_user" placeholder="Введите имя пользователя" value="{{ search_query }}">
    <button type="submit">Search</button>
</form>

{% if selected_user %}
    <form method="post" action=".">
        {% csrf_token %}
        <p>User found: {{ selected_user.username }}</p>
        <input type="hidden" name="selected_user" value="{{ selected_user.username }}">
        {{ form.as_p }}
        <button type="submit">Send an invitation</button>
    </form>
{% elif search_query %}
    <p>{{ error_message }}</p>
{% endif %}
<a href="{% url 'project-detail' project.id %}">Back to project</a>
{% endblock %}
